/*!
* OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["sap/base/Log","./Utils","sap/base/strings/hyphenate","sap/base/strings/camelize","sap/ui/integration/thirdparty/customElements","sap/ui/integration/thirdparty/customEvent"],function(L,U,h,c,a,b){"use strict";function d(D){var p=D.map(function(s){return window.customElements.whenDefined(s);});return Promise.all(p);}function C(){return Reflect.construct(HTMLElement,[],this.constructor);}C.prototype=Object.create(HTMLElement.prototype);C.prototype.constructor=C;C.prototype.connectedCallback=function(){this._init();this._upgradeAllProperties();this._upgradeAllAssociations();this._oControlInstance.placeAt(this.firstElementChild);this._attachEventListeners();};C.prototype.disconnectedCallback=function(){if(this._oControlInstance){this._oControlInstance.destroy();delete this._oControlInstance;}if(this.firstElementChild){this.removeChild(this.firstElementChild);}};C.prototype.attributeChangedCallback=function(A,o,n){this._init();var s=c(A);if(U.isJson(n)){n=JSON.parse(n);}if(this.constructor._mAllProperties[s]){this.constructor._mAllProperties[s].set(this._oControlInstance,n);}else if(this.constructor._mAllAssociations[s]){d(this.constructor._aDependencies).then(function(){var v=document.getElementById(n)._getControl();this.constructor._mAllAssociations[s].set(this._oControlInstance,v);}.bind(this));}else{L.error("Unknown attribute "+A+" set to "+this.id);}};C.prototype._init=function(){if(!this._oControlInstance){this._oControlInstance=new this.constructor._ControlClass();}if(!this.firstElementChild){var u=document.createElement("div");u.style.display="block";this.appendChild(u);}};C.prototype.getControl=function(){L.warning("getControl method is experimental and might change in future.");return this._getControl();};C.prototype._getControl=function(){this._init();return this._oControlInstance;};C.prototype._attachEventListeners=function(){Object.keys(this.constructor._oMetadata.getEvents()).map(function(e){this._oControlInstance.attachEvent(e,function(E){this.dispatchEvent(new CustomEvent(e,{detail:E,bubbles:true}));},this);}.bind(this));};C.prototype._upgradeAllProperties=function(){this.constructor._aAllProperties.forEach(this._upgradeProperty.bind(this));};C.prototype._upgradeProperty=function(p){if(this[p]){var v=this[p];delete this[p];this[p]=v;}};C.prototype._upgradeAllAssociations=function(){d(this.constructor._aDependencies).then(function(){for(var k in this.constructor._mAllAssociations){if(this.constructor._mAllAssociations[k].get(this._oControlInstance)){var v=document.getElementById(this[k])._getControl();this.constructor._mAllAssociations[k].set(this._oControlInstance,v);}}}.bind(this));};C._generateAccessors=function(){var p=this.prototype;this._aAllProperties.forEach(function(P){Object.defineProperty(p,P,{get:function(){return this.getAttribute(h(P));},set:function(v){if(typeof v==="object"){v=JSON.stringify(v);}return this.setAttribute(h(P),v);}});});};C.define=function(s,e,D){this._ControlClass=e;this._oMetadata=e.getMetadata();this._mAllAssociations=this._oMetadata.getAllAssociations();this._mAllProperties=this._oMetadata.getAllProperties();var k="";this._aAllProperties=[];this._aDependencies=D;for(k in this._mAllProperties){this._aAllProperties.push(k);}for(k in this._mAllAssociations){this._aAllProperties.push(k);}Object.defineProperty(this,"observedAttributes",{get:function(){var A=this._aAllProperties.map(h);return A;}});this._generateAccessors();window.customElements.define(s,this);};return C;});
