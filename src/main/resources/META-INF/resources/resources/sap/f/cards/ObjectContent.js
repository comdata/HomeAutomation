/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/f/library","sap/f/cards/BaseContent","sap/m/HBox","sap/m/VBox","sap/m/Text","sap/m/Title","sap/f/Avatar","sap/m/Link","sap/m/Label","sap/ui/core/ResizeHandler","sap/ui/layout/AlignedFlowLayout","sap/ui/dom/units/Rem","sap/f/cards/BindingHelper","sap/f/cards/IconFormatter"],function(l,B,H,V,T,a,A,L,b,R,c,d,e,I){"use strict";var f=l.cards.AreaType;var O=B.extend("sap.f.cards.ObjectContent",{renderer:{}});O.prototype._getRootContainer=function(){if(this._bIsBeingDestroyed){return null;}var o=this.getAggregation("_content");if(!o){o=new c();this.setAggregation("_content",o);}this._sResizeListenerId=R.register(o,this.onAlignedFlowLayoutResize.bind(this));return o;};O.prototype.onAlignedFlowLayoutResize=function(E){if(E&&(E.size.width===E.oldSize.width)&&!E.control){return;}var C=E.control,m=C.getMinItemWidth(),n=C.getContent().length,M;if(m.lastIndexOf("rem")!==-1){M=d.toPx(m);}else if(m.lastIndexOf("px")!==-1){M=parseFloat(m);}var i=Math.floor(E.size.width/M);if(i>n){i=n;}if(this._iColsOld===i){return;}this._iColsOld=i;var g=i-1,r=Math.ceil(n/i);C.getContent().forEach(function(o,h){o.addStyleClass("sapFCardObjectSpaceBetweenGroup");if(g===h&&g<n){o.removeStyleClass("sapFCardObjectSpaceBetweenGroup");g+=i;}if(h+1>(r-1)*i){o.addStyleClass("sapFCardObjectGroupLastInColumn");}else{o.removeStyleClass("sapFCardObjectGroupLastInColumn");}});};O.prototype.exit=function(){B.prototype.exit.apply(this,arguments);if(this._sResizeListenerId){R.deregister(this._sResizeListenerId);this._sResizeListenerId="";}};O.prototype.setConfiguration=function(C){B.prototype.setConfiguration.apply(this,arguments);if(!C){return this;}if(C.groups){this._addGroups(C);}return this;};O.prototype._addGroups=function(C){var o=this._getRootContainer();var g=C.groups||[];g.forEach(function(G){var h=new V().addStyleClass("sapFCardObjectGroup");var t=new a({text:G.title}).addStyleClass("sapFCardObjectItemTitle");h.addItem(t);G.items.forEach(function(i){var j,s=i.label,v=i.value,k,m;if(s){s=s[s.length-1]===":"?s:s+=":";k=new b({text:s}).addStyleClass("sapFCardObjectItemLabel");}if(v){switch(i.type){case'link':j=new L({href:i.url||v,text:v,target:i.target||'_blank'});break;case'email':m="mailto:"+v;if(i.emailSubject){m+='?subject='+i.emailSubject;}j=new L({href:m,text:v});break;case'phone':j=new L({href:"tel:"+v,text:v});break;default:j=new T({text:v});break;}}if(j){j.addStyleClass("sapFCardObjectItemText");}if(i.icon){var n=new A({customDisplaySize:"2.5rem",displaySize:"Custom"}).addStyleClass("sapFCardObjectItemAvatar sapFCardObjectItemLabel");var p=new V({items:[k,j]});var q=new H({items:[n,p]});e.bindProperty(n,"src",i.icon.src,function(v){return I.formatSrc(v,this._sAppId);}.bind(this));h.addItem(q);}else{h.addItem(k);h.addItem(j);}},this);o.addContent(h);},this);this._oActions.setAreaType(f.Content);this._oActions.attach(C,this);};return O;});
